<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Couleur</title>
  <link rel="stylesheet" href="./../style.css">
</head>
<body>
    <nav>
        <div class="home-container">
            <a href="./../home.html" class="user-profile">
                <div class="user-profile-inner">
                    <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="1em"
                    height="1em"
                    viewBox="0 0 1024 1024"
                    stroke-width="0"
                    fill="currentColor"
                    stroke="currentColor"
                    class="icon"
                    >
                    <path
                        d="M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 0 0-44.4 0L77.5 505a63.9 63.9 0 0 0-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0 0 18.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"
                    ></path>
                    </svg>
                    <p>Accueil</p>
                </div>
            </a>
        </div>
    
        <div class="login-container">
            <a href="./login.html" class="user-profile">
                <div class="user-profile-inner">
                    <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <g data-name="Layer 2" id="Layer_2">
                            <path d="m15.626 11.769a6 6 0 1 0 -7.252 0 9.008 9.008 0 0 0 -5.374 8.231 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 9.008 9.008 0 0 0 -5.374-8.231zm-7.626-4.769a4 4 0 1 1 4 4 4 4 0 0 1 -4-4zm10 14h-12a1 1 0 0 1 -1-1 7 7 0 0 1 14 0 1 1 0 0 1 -1 1z"></path>
                        </g>
                    </svg>
                    <p>Log In</p>
                </div>
            </a>
        </div>
    </nav>
  <h1>Choisissez un mot :</h1>

  <section class="form-color-container">
    <div>
      <div class="mot-container" data-sequence="BVVRVBVRR">
        <button class="go-to" onclick="launchSequence('BVVRVBVRR')">
          Afficher Mot 1
          <div class="arrow-wrapper">
            <div class="arrow"></div>
          </div></button>
        <div class="form">
          <input type="text" class="input-field" placeholder="Entrez le mot pour Mot 1">
          <button class="validate-btn">Valider</button>
        </div>
        <div class="message"></div>
      </div>
    </div>

    <div>
      <div class="mot-container" data-sequence="RBRBBRRRBVVVVRR">
        <button class="go-to" onclick="launchSequence('RBRBBRRRBVVVVRR')">
          Afficher Mot 2
          <div class="arrow-wrapper">
            <div class="arrow"></div>
          </div>
        </button>
        <div>
          <input type="text" class="input-field" placeholder="Entrez le mot pour Mot 2">
          <button class="validate-btn">Valider</button>
        </div>
        <div class="message"></div>
      </div>
    </div>

    <div>
      <div class="mot-container" data-sequence="VBVVVRBVV">
        <button class="go-to" onclick="launchSequence('VBVVVRBVV')">
          Afficher Mot 3
          <div class="arrow-wrapper">
            <div class="arrow"></div>
          </div>
        </button>
        <div>
          <input type="text" class="input-field" placeholder="Entrez le mot pour Mot 3">
          <button class="validate-btn">Valider</button>
        </div>
        <div class="message"></div>
      </div>
    </div>

    <div>
      <div class="mot-container" data-sequence="VBBRBBBVVVRBBRR">
        <button class="go-to" onclick="launchSequence('VBBRBBBVVVRBBRR')">
          Afficher Mot 4
          <div class="arrow-wrapper">
            <div class="arrow"></div>
          </div>
        </button>
        <div>
          <input type="text" class="input-field" placeholder="Entrez le mot pour Mot 3">
          <button class="validate-btn">Valider</button>
        </div>
        <div class="message"></div>
      </div>
    </div>
  <section>

  <script src="./../Color.js"></script>
  <script>
    function launchSequence(word) {
      sessionStorage.setItem('inputSequence', word);
      window.location.href = 'colorDisplay.html';
    }

    const containers = document.querySelectorAll('.mot-container');
    const nextPageBtn = document.getElementById('nextPage');

    containers.forEach(container => {
      const input = container.querySelector('.input-field');
      const message = container.querySelector('.message');
      const button = container.querySelector('.validate-btn');
      const expectedSequence = container.dataset.sequence;

      button.addEventListener('click', () => {
        const userInput = input.value.trim();
        const reconstructed = reconstructSequenceFromText(userInput, association); // fonction de Color.js

        if (reconstructed === expectedSequence) {
          message.textContent = "✔ Mot valide";
          message.className = "message valid";
        } else {
          message.textContent = "❌ Mot invalide";
          message.className = "message invalid";
        }

        checkAllValid();
      });
    });

    function checkAllValid() {
      const allValid = Array.from(document.querySelectorAll('.message')).every(msg => msg.classList.contains('valid'));
      nextPageBtn.style.display = allValid ? 'inline-block' : 'none';
    }
  </script>
</body>
</html>
