<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Color</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <nav>
    <a href="./index.html" class="btn-menu">Menu</a>
  </nav>
  <h1>Choisissez un mot :</h1>

  <div class="mot-container" data-sequence="BVVRVBVRR">
    <button onclick="launchSequence('BVVRVBVRR')">Afficher Mot 1</button>
    <div>
      <input type="text" class="input-field" placeholder="Entrez le mot pour Mot 1">
      <button class="validate-btn">Valider</button>
    </div>
    <div class="message"></div>
  </div>

  <div class="mot-container" data-sequence="RBRBBRRRBVVVVRR">
    <button onclick="launchSequence('RBRBBRRRBVVVVRR')">Afficher Mot 2</button>
    <div>
      <input type="text" class="input-field" placeholder="Entrez le mot pour Mot 2">
      <button class="validate-btn">Valider</button>
    </div>
    <div class="message"></div>
  </div>

  <div class="mot-container" data-sequence="VBVVVRBVV">
    <button onclick="launchSequence('VBVVVRBVV')">Afficher Mot 3</button>
    <div>
      <input type="text" class="input-field" placeholder="Entrez le mot pour Mot 3">
      <button class="validate-btn">Valider</button>
    </div>
    <div class="message"></div>
  </div>

  <div class="mot-container" data-sequence="VBBRBBBVVVRBBRR">
    <button onclick="launchSequence('VBBRBBBVVVRBBRR')">Afficher Mot 4</button>
    <div>
      <input type="text" class="input-field" placeholder="Entrez le mot pour Mot 3">
      <button class="validate-btn">Valider</button>
    </div>
    <div class="message"></div>
  </div>

  <button id="nextPage" style="display:none;" onclick="window.location.href='suivant.html'">Continuer</button>

  <script src="Color.js"></script>
  <script>
    function launchSequence(word) {
      sessionStorage.setItem('inputSequence', word);
      window.location.href = 'colorDisplay.html';
    }

    const containers = document.querySelectorAll('.mot-container');
    const nextPageBtn = document.getElementById('nextPage');

    containers.forEach(container => {
      const input = container.querySelector('.input-field');
      const message = container.querySelector('.message');
      const button = container.querySelector('.validate-btn');
      const expectedSequence = container.dataset.sequence;

      button.addEventListener('click', () => {
        const userInput = input.value.trim();
        const reconstructed = reconstructSequenceFromText(userInput, association); // fonction de Color.js

        if (reconstructed === expectedSequence) {
          message.textContent = "✔ Mot valide";
          message.className = "message valid";
        } else {
          message.textContent = "❌ Mot invalide";
          message.className = "message invalid";
        }

        checkAllValid();
      });
    });

    function checkAllValid() {
      const allValid = Array.from(document.querySelectorAll('.message')).every(msg => msg.classList.contains('valid'));
      nextPageBtn.style.display = allValid ? 'inline-block' : 'none';
    }
  </script>
</body>
</html>
